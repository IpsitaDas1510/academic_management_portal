<!DOCTYPE html>
<html>
<head>
  <title>Student Details</title>
</head>
<body>
  <h2>Student Details</h2>
  <div id="student"></div>
  <h3>Marks</h3>
  <ul id="marks"></ul>

  <script>
    const id = new URLSearchParams(window.location.search).get("id");

    fetch(`/api/students/${id}`)
      .then(r => r.json())
      .then(s => {
        document.getElementById("student").innerHTML =
          `<p>Name: ${s.name}</p><p>Course: ${s.course}</p><p>Year: ${s.year}</p>`;
      });

    fetch(`/api/marks/student/${id}`)
      .then(r => r.json())
      .then(marks => {
        const ul = document.getElementById("marks");
        marks.forEach(m =>
          ul.innerHTML += `<li>${m.year} : ${m.marks}</li>`
        );
      });
  </script>
</body>
</html>

<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Students</title>
</head>

<body>

<h1>Students</h1>

<a href="/">‚Üê Back to Home</a>

<hr>

<button onclick="loadStudents()">Load Students</button>

<ul id="studentList"></ul>

<script>
function loadStudents() {
    fetch("/api/students")
        .then(res => res.json())
        .then(data => {
            const list = document.getElementById("studentList");
            list.innerHTML = "";

            if (data.length === 0) {
                list.innerHTML = "<li>No students found</li>";
                return;
            }

            data.forEach(student => {
                const li = document.createElement("li");

                li.innerHTML = `
                    <strong>${student.name}</strong>
                    (${student.course}, Year ${student.year})
                    <a href="/student-detail.html?id=${student.id}">View</a>
                `;

                list.appendChild(li);
            });
        })
        .catch(err => {
            alert("Failed to load students");
            console.error(err);
        });
}
</script>

</body>
</html> -->



<!-- <!DOCTYPE html>
<html>
<head>
  <title>Students</title>
</head>
<body>
  <h2>Students</h2>
  <ul id="list"></ul>

  <script>
    fetch("/api/students")
      .then(r => r.json())
      .then(data => {
        const ul = document.getElementById("list");
        data.forEach(s => {
          const li = document.createElement("li");
          li.innerHTML = `<a href="student-detail.html?id=${s.id}">${s.name}</a>`;
          ul.appendChild(li);
        });
      });
  </script>
</body>
</html> -->


<div class="max-w-4xl mx-auto p-6">

  <!-- Header -->
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-3xl font-bold">Student Management System</h1>
    <a href="/" data-link class="text-sm text-blue-600 underline">
      Back to Home
    </a>
  </div>

  <!-- Add / Edit Student Form -->
  <div class="bg-white p-5 rounded shadow mb-8">
    <h2 class="font-semibold mb-3 text-lg">Add / Edit Student</h2>

    <form id="studentForm" class="space-y-3">
      <input id="name" type="text" placeholder="Name" required
        class="w-full border rounded px-3 py-2">

      <input id="email" type="email" placeholder="Email" required
        class="w-full border rounded px-3 py-2">

      <input id="course" type="text" placeholder="Course" required
        class="w-full border rounded px-3 py-2">

      <input id="year" type="text" placeholder="Year" required
        class="w-full border rounded px-3 py-2">

      <div class="flex gap-2">
        <button id="submitBtn" type="submit"
          class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 rounded">
          Add Student
        </button>

        <button id="cancelBtn" type="button"
          class="flex-1 bg-gray-400 hover:bg-gray-500 text-white py-2 rounded hidden">
          Cancel
        </button>
      </div>
    </form>
  </div>

  <!-- Students Table -->
  <div class="bg-white p-5 rounded shadow">
    <h2 class="font-semibold mb-4 text-lg">All Students</h2>

    <!-- Loading -->
    <div id="loadingSpinner" class="text-center py-4">
      <div class="animate-spin h-6 w-6 mx-auto rounded-full border-b-2 border-blue-500"></div>
    </div>

    <!-- Table -->
    <div id="studentsTableContainer" class="hidden overflow-x-auto">
      <table class="min-w-full border text-left">
        <thead class="bg-gray-200">
          <tr>
            <th class="px-3 py-2">ID</th>
            <th class="px-3 py-2">Name</th>
            <th class="px-3 py-2">Email</th>
            <th class="px-3 py-2">Course</th>
            <th class="px-3 py-2">Year</th>
            <th class="px-3 py-2">Actions</th>
          </tr>
        </thead>
        <tbody id="studentsTableBody"></tbody>
      </table>

      <p id="noStudents" class="text-center text-gray-500 mt-3 hidden">
        No students found. Add one above.
      </p>
    </div>
  </div>

  <!-- Alerts -->
  <div id="alertContainer" class="fixed top-4 right-4 space-y-2 z-50"></div>
</div>
